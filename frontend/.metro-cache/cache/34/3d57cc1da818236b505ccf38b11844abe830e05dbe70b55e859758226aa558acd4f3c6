{"dependencies":[{"name":"boolbase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":32,"index":32}}],"key":"0NOX8eQTjRnr/BoMAee+Ac81wCc=","exportNames":["*"],"imports":1}},{"name":"../sort.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":33},"end":{"line":2,"column":41,"index":74}}],"key":"wRrMbOisgA91+MMOzbna2NI6Dz0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"PLACEHOLDER_ELEMENT\", {\n    enumerable: true,\n    get: function () {\n      return PLACEHOLDER_ELEMENT;\n    }\n  });\n  exports.ensureIsTag = ensureIsTag;\n  exports.getNextSiblings = getNextSiblings;\n  Object.defineProperty(exports, \"subselects\", {\n    enumerable: true,\n    get: function () {\n      return subselects;\n    }\n  });\n  var _boolbase = require(_dependencyMap[0], \"boolbase\");\n  var boolbase = _interopDefault(_boolbase);\n  var _sortJs = require(_dependencyMap[1], \"../sort.js\");\n  /** Used as a placeholder for :has. Will be replaced with the actual element. */\n  var PLACEHOLDER_ELEMENT = {};\n  function ensureIsTag(next, adapter) {\n    if (next === boolbase.default.falseFunc) return boolbase.default.falseFunc;\n    return elem => adapter.isTag(elem) && next(elem);\n  }\n  function getNextSiblings(elem, adapter) {\n    var siblings = adapter.getSiblings(elem);\n    if (siblings.length <= 1) return [];\n    var elemIndex = siblings.indexOf(elem);\n    if (elemIndex < 0 || elemIndex === siblings.length - 1) return [];\n    return siblings.slice(elemIndex + 1).filter(adapter.isTag);\n  }\n  function copyOptions(options) {\n    // Not copied: context, rootFunc\n    return {\n      xmlMode: !!options.xmlMode,\n      lowerCaseAttributeNames: !!options.lowerCaseAttributeNames,\n      lowerCaseTags: !!options.lowerCaseTags,\n      quirksMode: !!options.quirksMode,\n      cacheResults: !!options.cacheResults,\n      pseudos: options.pseudos,\n      adapter: options.adapter,\n      equals: options.equals\n    };\n  }\n  var is = (next, token, options, context, compileToken) => {\n    var func = compileToken(token, copyOptions(options), context);\n    return func === boolbase.default.trueFunc ? next : func === boolbase.default.falseFunc ? boolbase.default.falseFunc : elem => func(elem) && next(elem);\n  };\n  /*\n   * :not, :has, :is, :matches and :where have to compile selectors\n   * doing this in src/pseudos.ts would lead to circular dependencies,\n   * so we add them here\n   */\n  var subselects = {\n    is,\n    /**\n     * `:matches` and `:where` are aliases for `:is`.\n     */\n    matches: is,\n    where: is,\n    not(next, token, options, context, compileToken) {\n      var func = compileToken(token, copyOptions(options), context);\n      return func === boolbase.default.falseFunc ? next : func === boolbase.default.trueFunc ? boolbase.default.falseFunc : elem => !func(elem) && next(elem);\n    },\n    has(next, subselect, options, _context, compileToken) {\n      var adapter = options.adapter;\n      var opts = copyOptions(options);\n      opts.relativeSelector = true;\n      var context = subselect.some(s => s.some(_sortJs.isTraversal)) ?\n      // Used as a placeholder. Will be replaced with the actual element.\n      [PLACEHOLDER_ELEMENT] : undefined;\n      var compiled = compileToken(subselect, opts, context);\n      if (compiled === boolbase.default.falseFunc) return boolbase.default.falseFunc;\n      var hasElement = ensureIsTag(compiled, adapter);\n      // If `compiled` is `trueFunc`, we can skip this.\n      if (context && compiled !== boolbase.default.trueFunc) {\n        /*\n         * `shouldTestNextSiblings` will only be true if the query starts with\n         * a traversal (sibling or adjacent). That means we will always have a context.\n         */\n        var _compiled$shouldTestN = compiled.shouldTestNextSiblings,\n          shouldTestNextSiblings = _compiled$shouldTestN === void 0 ? false : _compiled$shouldTestN;\n        return elem => {\n          if (!next(elem)) return false;\n          context[0] = elem;\n          var childs = adapter.getChildren(elem);\n          var nextElements = shouldTestNextSiblings ? [...childs, ...getNextSiblings(elem, adapter)] : childs;\n          return adapter.existsOne(hasElement, nextElements);\n        };\n      }\n      return elem => next(elem) && adapter.existsOne(hasElement, adapter.getChildren(elem));\n    }\n  };\n});","lineCount":104,"map":[[12,2,4,0,"Object"],[12,8,4,0],[12,9,4,0,"defineProperty"],[12,23,4,0],[12,24,4,0,"exports"],[12,31,4,0],[13,4,4,0,"enumerable"],[13,14,4,0],[14,4,4,0,"get"],[14,7,4,0],[14,18,4,0,"get"],[14,19,4,0],[15,6,4,0],[15,13,4,0,"PLACEHOLDER_ELEMENT"],[15,32,4,0],[16,4,4,0],[17,2,4,0],[18,2,5,0,"exports"],[18,9,5,0],[18,10,5,0,"ensureIsTag"],[18,21,5,0],[18,24,5,0,"ensureIsTag"],[18,35,5,0],[19,2,10,0,"exports"],[19,9,10,0],[19,10,10,0,"getNextSiblings"],[19,25,10,0],[19,28,10,0,"getNextSiblings"],[19,43,10,0],[20,2,45,0,"Object"],[20,8,45,0],[20,9,45,0,"defineProperty"],[20,23,45,0],[20,24,45,0,"exports"],[20,31,45,0],[21,4,45,0,"enumerable"],[21,14,45,0],[22,4,45,0,"get"],[22,7,45,0],[22,18,45,0,"get"],[22,19,45,0],[23,6,45,0],[23,13,45,0,"subselects"],[23,23,45,0],[24,4,45,0],[25,2,45,0],[26,2,1,0],[26,6,1,0,"_boolbase"],[26,15,1,0],[26,18,1,0,"require"],[26,25,1,0],[26,26,1,0,"_dependencyMap"],[26,40,1,0],[27,2,1,0],[27,6,1,0,"boolbase"],[27,14,1,0],[27,17,1,0,"_interopDefault"],[27,32,1,0],[27,33,1,0,"_boolbase"],[27,42,1,0],[28,2,2,0],[28,6,2,0,"_sortJs"],[28,13,2,0],[28,16,2,0,"require"],[28,23,2,0],[28,24,2,0,"_dependencyMap"],[28,38,2,0],[29,2,3,0],[30,2,4,7],[30,6,4,13,"PLACEHOLDER_ELEMENT"],[30,25,4,32],[30,28,4,35],[30,29,4,36],[30,30,4,37],[31,2,5,7],[31,11,5,16,"ensureIsTag"],[31,22,5,27,"ensureIsTag"],[31,23,5,28,"next"],[31,27,5,32],[31,29,5,34,"adapter"],[31,36,5,41],[31,38,5,43],[32,4,6,4],[32,8,6,8,"next"],[32,12,6,12],[32,17,6,17,"boolbase"],[32,25,6,25],[32,26,6,25,"default"],[32,33,6,25],[32,34,6,26,"falseFunc"],[32,43,6,35],[32,45,7,8],[32,52,7,15,"boolbase"],[32,60,7,23],[32,61,7,23,"default"],[32,68,7,23],[32,69,7,24,"falseFunc"],[32,78,7,33],[33,4,8,4],[33,11,8,12,"elem"],[33,15,8,16],[33,19,8,21,"adapter"],[33,26,8,28],[33,27,8,29,"isTag"],[33,32,8,34],[33,33,8,35,"elem"],[33,37,8,39],[33,38,8,40],[33,42,8,44,"next"],[33,46,8,48],[33,47,8,49,"elem"],[33,51,8,53],[33,52,8,54],[34,2,9,0],[35,2,10,7],[35,11,10,16,"getNextSiblings"],[35,26,10,31,"getNextSiblings"],[35,27,10,32,"elem"],[35,31,10,36],[35,33,10,38,"adapter"],[35,40,10,45],[35,42,10,47],[36,4,11,4],[36,8,11,10,"siblings"],[36,16,11,18],[36,19,11,21,"adapter"],[36,26,11,28],[36,27,11,29,"getSiblings"],[36,38,11,40],[36,39,11,41,"elem"],[36,43,11,45],[36,44,11,46],[37,4,12,4],[37,8,12,8,"siblings"],[37,16,12,16],[37,17,12,17,"length"],[37,23,12,23],[37,27,12,27],[37,28,12,28],[37,30,13,8],[37,37,13,15],[37,39,13,17],[38,4,14,4],[38,8,14,10,"elemIndex"],[38,17,14,19],[38,20,14,22,"siblings"],[38,28,14,30],[38,29,14,31,"indexOf"],[38,36,14,38],[38,37,14,39,"elem"],[38,41,14,43],[38,42,14,44],[39,4,15,4],[39,8,15,8,"elemIndex"],[39,17,15,17],[39,20,15,20],[39,21,15,21],[39,25,15,25,"elemIndex"],[39,34,15,34],[39,39,15,39,"siblings"],[39,47,15,47],[39,48,15,48,"length"],[39,54,15,54],[39,57,15,57],[39,58,15,58],[39,60,16,8],[39,67,16,15],[39,69,16,17],[40,4,17,4],[40,11,17,11,"siblings"],[40,19,17,19],[40,20,17,20,"slice"],[40,25,17,25],[40,26,17,26,"elemIndex"],[40,35,17,35],[40,38,17,38],[40,39,17,39],[40,40,17,40],[40,41,17,41,"filter"],[40,47,17,47],[40,48,17,48,"adapter"],[40,55,17,55],[40,56,17,56,"isTag"],[40,61,17,61],[40,62,17,62],[41,2,18,0],[42,2,19,0],[42,11,19,9,"copyOptions"],[42,22,19,20,"copyOptions"],[42,23,19,21,"options"],[42,30,19,28],[42,32,19,30],[43,4,20,4],[44,4,21,4],[44,11,21,11],[45,6,22,8,"xmlMode"],[45,13,22,15],[45,15,22,17],[45,16,22,18],[45,17,22,19,"options"],[45,24,22,26],[45,25,22,27,"xmlMode"],[45,32,22,34],[46,6,23,8,"lowerCaseAttributeNames"],[46,29,23,31],[46,31,23,33],[46,32,23,34],[46,33,23,35,"options"],[46,40,23,42],[46,41,23,43,"lowerCaseAttributeNames"],[46,64,23,66],[47,6,24,8,"lowerCaseTags"],[47,19,24,21],[47,21,24,23],[47,22,24,24],[47,23,24,25,"options"],[47,30,24,32],[47,31,24,33,"lowerCaseTags"],[47,44,24,46],[48,6,25,8,"quirksMode"],[48,16,25,18],[48,18,25,20],[48,19,25,21],[48,20,25,22,"options"],[48,27,25,29],[48,28,25,30,"quirksMode"],[48,38,25,40],[49,6,26,8,"cacheResults"],[49,18,26,20],[49,20,26,22],[49,21,26,23],[49,22,26,24,"options"],[49,29,26,31],[49,30,26,32,"cacheResults"],[49,42,26,44],[50,6,27,8,"pseudos"],[50,13,27,15],[50,15,27,17,"options"],[50,22,27,24],[50,23,27,25,"pseudos"],[50,30,27,32],[51,6,28,8,"adapter"],[51,13,28,15],[51,15,28,17,"options"],[51,22,28,24],[51,23,28,25,"adapter"],[51,30,28,32],[52,6,29,8,"equals"],[52,12,29,14],[52,14,29,16,"options"],[52,21,29,23],[52,22,29,24,"equals"],[53,4,30,4],[53,5,30,5],[54,2,31,0],[55,2,32,0],[55,6,32,6,"is"],[55,8,32,8],[55,11,32,11,"is"],[55,12,32,12,"next"],[55,16,32,16],[55,18,32,18,"token"],[55,23,32,23],[55,25,32,25,"options"],[55,32,32,32],[55,34,32,34,"context"],[55,41,32,41],[55,43,32,43,"compileToken"],[55,55,32,55],[55,60,32,60],[56,4,33,4],[56,8,33,10,"func"],[56,12,33,14],[56,15,33,17,"compileToken"],[56,27,33,29],[56,28,33,30,"token"],[56,33,33,35],[56,35,33,37,"copyOptions"],[56,46,33,48],[56,47,33,49,"options"],[56,54,33,56],[56,55,33,57],[56,57,33,59,"context"],[56,64,33,66],[56,65,33,67],[57,4,34,4],[57,11,34,11,"func"],[57,15,34,15],[57,20,34,20,"boolbase"],[57,28,34,28],[57,29,34,28,"default"],[57,36,34,28],[57,37,34,29,"trueFunc"],[57,45,34,37],[57,48,35,10,"next"],[57,52,35,14],[57,55,36,10,"func"],[57,59,36,14],[57,64,36,19,"boolbase"],[57,72,36,27],[57,73,36,27,"default"],[57,80,36,27],[57,81,36,28,"falseFunc"],[57,90,36,37],[57,93,37,14,"boolbase"],[57,101,37,22],[57,102,37,22,"default"],[57,109,37,22],[57,110,37,23,"falseFunc"],[57,119,37,32],[57,122,38,15,"elem"],[57,126,38,19],[57,130,38,24,"func"],[57,134,38,28],[57,135,38,29,"elem"],[57,139,38,33],[57,140,38,34],[57,144,38,38,"next"],[57,148,38,42],[57,149,38,43,"elem"],[57,153,38,47],[57,154,38,48],[58,2,39,0],[58,3,39,1],[59,2,40,0],[60,0,41,0],[61,0,42,0],[62,0,43,0],[63,0,44,0],[64,2,45,7],[64,6,45,13,"subselects"],[64,16,45,23],[64,19,45,26],[65,4,46,4,"is"],[65,6,46,6],[66,4,47,4],[67,0,48,0],[68,0,49,0],[69,4,50,4,"matches"],[69,11,50,11],[69,13,50,13,"is"],[69,15,50,15],[70,4,51,4,"where"],[70,9,51,9],[70,11,51,11,"is"],[70,13,51,13],[71,4,52,4,"not"],[71,7,52,7,"not"],[71,8,52,8,"next"],[71,12,52,12],[71,14,52,14,"token"],[71,19,52,19],[71,21,52,21,"options"],[71,28,52,28],[71,30,52,30,"context"],[71,37,52,37],[71,39,52,39,"compileToken"],[71,51,52,51],[71,53,52,53],[72,6,53,8],[72,10,53,14,"func"],[72,14,53,18],[72,17,53,21,"compileToken"],[72,29,53,33],[72,30,53,34,"token"],[72,35,53,39],[72,37,53,41,"copyOptions"],[72,48,53,52],[72,49,53,53,"options"],[72,56,53,60],[72,57,53,61],[72,59,53,63,"context"],[72,66,53,70],[72,67,53,71],[73,6,54,8],[73,13,54,15,"func"],[73,17,54,19],[73,22,54,24,"boolbase"],[73,30,54,32],[73,31,54,32,"default"],[73,38,54,32],[73,39,54,33,"falseFunc"],[73,48,54,42],[73,51,55,14,"next"],[73,55,55,18],[73,58,56,14,"func"],[73,62,56,18],[73,67,56,23,"boolbase"],[73,75,56,31],[73,76,56,31,"default"],[73,83,56,31],[73,84,56,32,"trueFunc"],[73,92,56,40],[73,95,57,18,"boolbase"],[73,103,57,26],[73,104,57,26,"default"],[73,111,57,26],[73,112,57,27,"falseFunc"],[73,121,57,36],[73,124,58,19,"elem"],[73,128,58,23],[73,132,58,28],[73,133,58,29,"func"],[73,137,58,33],[73,138,58,34,"elem"],[73,142,58,38],[73,143,58,39],[73,147,58,43,"next"],[73,151,58,47],[73,152,58,48,"elem"],[73,156,58,52],[73,157,58,53],[74,4,59,4],[74,5,59,5],[75,4,60,4,"has"],[75,7,60,7,"has"],[75,8,60,8,"next"],[75,12,60,12],[75,14,60,14,"subselect"],[75,23,60,23],[75,25,60,25,"options"],[75,32,60,32],[75,34,60,34,"_context"],[75,42,60,42],[75,44,60,44,"compileToken"],[75,56,60,56],[75,58,60,58],[76,6,61,8],[76,10,61,16,"adapter"],[76,17,61,23],[76,20,61,28,"options"],[76,27,61,35],[76,28,61,16,"adapter"],[76,35,61,23],[77,6,62,8],[77,10,62,14,"opts"],[77,14,62,18],[77,17,62,21,"copyOptions"],[77,28,62,32],[77,29,62,33,"options"],[77,36,62,40],[77,37,62,41],[78,6,63,8,"opts"],[78,10,63,12],[78,11,63,13,"relativeSelector"],[78,27,63,29],[78,30,63,32],[78,34,63,36],[79,6,64,8],[79,10,64,14,"context"],[79,17,64,21],[79,20,64,24,"subselect"],[79,29,64,33],[79,30,64,34,"some"],[79,34,64,38],[79,35,64,40,"s"],[79,36,64,41],[79,40,64,46,"s"],[79,41,64,47],[79,42,64,48,"some"],[79,46,64,52],[79,47,64,53,"isTraversal"],[79,54,64,64],[79,55,64,64,"isTraversal"],[79,66,64,64],[79,67,64,65],[79,68,64,66],[80,6,65,14],[81,6,66,16],[81,7,66,17,"PLACEHOLDER_ELEMENT"],[81,26,66,36],[81,27,66,37],[81,30,67,14,"undefined"],[81,39,67,23],[82,6,68,8],[82,10,68,14,"compiled"],[82,18,68,22],[82,21,68,25,"compileToken"],[82,33,68,37],[82,34,68,38,"subselect"],[82,43,68,47],[82,45,68,49,"opts"],[82,49,68,53],[82,51,68,55,"context"],[82,58,68,62],[82,59,68,63],[83,6,69,8],[83,10,69,12,"compiled"],[83,18,69,20],[83,23,69,25,"boolbase"],[83,31,69,33],[83,32,69,33,"default"],[83,39,69,33],[83,40,69,34,"falseFunc"],[83,49,69,43],[83,51,70,12],[83,58,70,19,"boolbase"],[83,66,70,27],[83,67,70,27,"default"],[83,74,70,27],[83,75,70,28,"falseFunc"],[83,84,70,37],[84,6,71,8],[84,10,71,14,"hasElement"],[84,20,71,24],[84,23,71,27,"ensureIsTag"],[84,34,71,38],[84,35,71,39,"compiled"],[84,43,71,47],[84,45,71,49,"adapter"],[84,52,71,56],[84,53,71,57],[85,6,72,8],[86,6,73,8],[86,10,73,12,"context"],[86,17,73,19],[86,21,73,23,"compiled"],[86,29,73,31],[86,34,73,36,"boolbase"],[86,42,73,44],[86,43,73,44,"default"],[86,50,73,44],[86,51,73,45,"trueFunc"],[86,59,73,53],[86,61,73,55],[87,8,74,12],[88,0,75,0],[89,0,76,0],[90,0,77,0],[91,8,78,12],[91,12,78,12,"_compiled$shouldTestN"],[91,33,78,12],[91,36,78,55,"compiled"],[91,44,78,63],[91,45,78,20,"shouldTestNextSiblings"],[91,67,78,42],[92,10,78,20,"shouldTestNextSiblings"],[92,32,78,42],[92,35,78,42,"_compiled$shouldTestN"],[92,56,78,42],[92,70,78,45],[92,75,78,50],[92,78,78,50,"_compiled$shouldTestN"],[92,99,78,50],[93,8,79,12],[93,15,79,20,"elem"],[93,19,79,24],[93,23,79,29],[94,10,80,16],[94,14,80,20],[94,15,80,21,"next"],[94,19,80,25],[94,20,80,26,"elem"],[94,24,80,30],[94,25,80,31],[94,27,81,20],[94,34,81,27],[94,39,81,32],[95,10,82,16,"context"],[95,17,82,23],[95,18,82,24],[95,19,82,25],[95,20,82,26],[95,23,82,29,"elem"],[95,27,82,33],[96,10,83,16],[96,14,83,22,"childs"],[96,20,83,28],[96,23,83,31,"adapter"],[96,30,83,38],[96,31,83,39,"getChildren"],[96,42,83,50],[96,43,83,51,"elem"],[96,47,83,55],[96,48,83,56],[97,10,84,16],[97,14,84,22,"nextElements"],[97,26,84,34],[97,29,84,37,"shouldTestNextSiblings"],[97,51,84,59],[97,54,85,22],[97,55,85,23],[97,58,85,26,"childs"],[97,64,85,32],[97,66,85,34],[97,69,85,37,"getNextSiblings"],[97,84,85,52],[97,85,85,53,"elem"],[97,89,85,57],[97,91,85,59,"adapter"],[97,98,85,66],[97,99,85,67],[97,100,85,68],[97,103,86,22,"childs"],[97,109,86,28],[98,10,87,16],[98,17,87,23,"adapter"],[98,24,87,30],[98,25,87,31,"existsOne"],[98,34,87,40],[98,35,87,41,"hasElement"],[98,45,87,51],[98,47,87,53,"nextElements"],[98,59,87,65],[98,60,87,66],[99,8,88,12],[99,9,88,13],[100,6,89,8],[101,6,90,8],[101,13,90,16,"elem"],[101,17,90,20],[101,21,90,25,"next"],[101,25,90,29],[101,26,90,30,"elem"],[101,30,90,34],[101,31,90,35],[101,35,91,12,"adapter"],[101,42,91,19],[101,43,91,20,"existsOne"],[101,52,91,29],[101,53,91,30,"hasElement"],[101,63,91,40],[101,65,91,42,"adapter"],[101,72,91,49],[101,73,91,50,"getChildren"],[101,84,91,61],[101,85,91,62,"elem"],[101,89,91,66],[101,90,91,67],[101,91,91,68],[102,4,92,4],[103,2,93,0],[103,3,93,1],[104,0,93,2],[104,3]],"functionMap":{"names":["<global>","ensureIsTag","<anonymous>","getNextSiblings","copyOptions","is","not","has","subselect.some$argument_0"],"mappings":"AAA;OCI;WCG,2CD;CDC;OGC;CHQ;AIC;CJY;WKC;cHM,kCG;CLC;IMa;kBJM,mCI;KNC;IOC;uCCI,0BD;mBLe;aKS;eLE;oEKC;KPC"},"hasCjsExports":false},"type":"js/module"}]}